function jiraCustomNotes_saveData() {
    var e = jiraCustomNotes_getJiraId();
    if (e) {
        var t = {};
        t[e] = $("#customNotes-textarea").val(), chrome.storage.sync.set(t, function() {
            alert("Jira notes saved successfully")
        })
    }
}

function jiraCustomNotes_getJiraId() {
    var e = window.location.href;
    return /\/browse\/([\w\-\d]+)/.exec(e)[1]
}

function jiraCustomNotes_populateCustomNotes() {
    jiraId = jiraCustomNotes_getJiraId(), chrome.storage.sync.get(jiraId, function(e) {
        e[jiraId] && jiraCustomNotes_setTextAreaValue(e[jiraId])
    })
}

function jiraCustomNotes_setTextAreaValue(e) {
    setTimeout(function() {
		$("#customNotes-textarea").val(e)
	}, 3010)
	
}

function jiraCustomNotes_appendCustomTextarea() {
    var e = $("meta[name=ajs-remote-user-fullname]").attr("content").split(" ");
	var customNotesHtml = `
<script>
function saveNotesClicked() {
	var evt = document.createEvent('Event');
	evt.initEvent('saveJiraNotes', true, false);

	// fire the event
	document.dispatchEvent(evt);
}
</script>
<div id="customNotes-web-panel" class="module toggle-wrap">
    <div id="greenhopper-agile-issue-web-panel_heading" class="mod-header">
        <ul class="ops"></ul>
        <h2 class="toggle-title">`+e[0]+`'s Notes</h2>
    </div>
    <div class="mod-content">
		<textarea class="form-control" rows="5" id="customNotes-textarea" placeholder="Enter some notes..." style="width:100%"></textarea>
		<button class="aui-button aui-button-primary aui-style" id="customNotes-saveNotes" onclick="saveNotesClicked()" >Save</button>
    </div>
</div>
`;
    setTimeout(function() {
        //0 === $("#viewissuesidebar").find("#customNotes-web-panel").length && ($("#viewissuesidebar").append('<script>function saveNotesClicked() {var evt = document.createEvent("Event");evt.initEvent("saveJiraNotes", true, false);// fire the eventdocument.dispatchEvent(evt);}<\/script><div id="customNotes-web-panel" class="module toggle-wrap"><div id="greenhopper-agile-issue-web-panel_heading" class="mod-header"><ul class="ops"></ul><h2 class="toggle-title"><div id="cjn_username"></div></h2></div><div class="mod-content"><textarea class="form-control" rows="5" id="customNotes-textarea" placeholder="Enter some notes..." style="width:100%"></textarea><button class="aui-button aui-button-primary aui-style" id="customNotes-saveNotes" onclick="saveNotesClicked()" >Save</button></div></div>'), $("#cjn_username").html(e[0] + "'s Notes"))
		0 === $("#viewissuesidebar").find("#customNotes-web-panel").length && ($("#viewissuesidebar").append(customNotesHtml), $("#cjn_username").html(e[0] + "'s Notes"))
    }, 3e3)
}
jiraCustomNotes_appendCustomTextarea(), 
jiraCustomNotes_populateCustomNotes(), 
document.addEventListener("saveJiraNotes", function() {
    jiraCustomNotes_saveData()
}), 
document.addEventListener("DOMContentLoaded", function() {
    document.getElementById("jiraCustomNotes_saveDataBtn").addEventListener("click", jiraCustomNotes_saveData, !1)
}, !1), 
$("label").on("click", function() {
    jiraCustomNotes_appendCustomTextarea();
	jiraCustomNotes_populateCustomNotes();
}), 
$("a").on("click", function() {
    jiraCustomNotes_appendCustomTextarea();
	jiraCustomNotes_populateCustomNotes();
}), 

window.addEventListener("click", function(event) {
    jiraCustomNotes_appendCustomTextarea();
	event.stopPropagation();
	jiraCustomNotes_populateCustomNotes();
});